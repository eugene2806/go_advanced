## Представление (VIEW)

>Представление (VIEW) – это объект базы данных, который хранит в себе запрос SELECT,  
>и в случае обращения к данному объекту будет возвращен результирующий набор данных, который формирует запрос,  
>указанный в определении представления.

*Иными словами, это виртуальная (логическая) таблица, она не содержит в себе данных, но к ней можно обращаться как к обычной таблице,  
и она будет возвращать Вам данные. Если Вы слышали такое понятие как «Вьюха», так вот, это и есть представление!*

### Для чего нужны представления

Вы можете спросить, а для чего нужны представления, как мы их можем использовать, чем они нам полезны?  

**Если достаточно часто в своих SQL инструкциях Вы используете однотипные запросы, которые возвращают табличные данные,  
то для удобства и сокращения кода Вы можете сохранить такие запросы в виде представления. И затем,  
где Вам требуется использовать именно тот набор данных, который Вы указали в запросе, Вы будете указывать название представления,  
точно так же как мы указываем название таблиц, например, в соединении JOIN. Согласитесь – это очень удобно!**

Таким образом, представления нужны для:

* Упрощения и сокращения кода запроса;
* Повышения читабельности кода запроса;
* Сокрытия сложности реализации задачи от пользователя;
* Обеспечения эффективных путей доступа к данным;
* Обеспечения корректности производных данных;
* Более легкого управления. Чтобы внести изменения в алгоритм, формирующий данные, которые возвращает представление,  
не требуется изменять код везде, где используется этот алгоритм, достаточно изменить код в одном определении представления.
* Как Вы понимаете, представления мы можем использовать не только для упрощения и сокращения кода SQL запроса,  
а еще для повышения безопасности, сокрытия сложности реализации алгоритмов и для обеспечения корректности производных данных.

### Какие бывают представления

Представления бывают:

* Пользовательские – это те, которые мы сами создаем;
* Системные – это представления, которые уже есть в СУБД. Они возвращают нам системную информацию,  
однако в каждой СУБД они свои, поэтому мы их рассматривать не будем.  

*А сейчас давайте научимся создавать собственные представления.*  

### Создание представления

Представим, что нам постоянно требуется знать, сколько товаров в той или иной категории и для этого мы всегда запускаем следующий запрос  

>SELECT c.category_name AS CategoryName,  
>COUNT(*) AS CntProducts  
>FROM goods g  
>INNER JOIN categories c ON category = c.category_id  
>GROUP BY c.category_name;  

*Для решения нашей задачи мы можем создать следующее представление.*  

>CREATE VIEW count_products  
>AS  
>SELECT c.category_name AS category_name,  
>COUNT(*) AS cnt_products  
>FROM goods g  
>INNER JOIN categories c ON category = c.category_id  
>GROUP BY c.category_name;  

Теперь, для того чтобы получить данные о количестве товаров в категории, мы можем обратиться к этому представлению,  
например, как к обычной таблице.  

>SELECT * FROM count_products;  

### Удаление представления

Если Вам уже точно не нужно представление, т.е. Вы им больше не будете пользоваться, и оно не используется в других представлениях,  
функциях или процедурах, иными словами, на него никто не ссылается, то Вы его можете удалить, а делается это с помощью инструкции DROP VIEW.  

>DROP VIEW count_products;